// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Feeder {
  id         Int    @id @default(autoincrement())
  networkNum Int
  feederNum  Int
  nodes      Node[]

  @@map(name: "feeders")
}

model Node {
  id        Int     @id @default(autoincrement())
  feeder    Feeder  @relation(fields: [feederId], references: [id])
  feederId  Int
  num       Int
  posX      Float
  posY      Float
  hasLoad   Boolean
  nextLines Line[]  @relation("PrevNode")
  prevLines Line[]  @relation("NextNode")

  @@map(name: "nodes")
}

model Line {
  id         Int    @id @default(autoincrement())
  prevNode   Node   @relation("PrevNode", fields: [prevNodeId], references: [id])
  prevNodeId Int
  nextNode   Node   @relation("NextNode", fields: [nextNodeId], references: [id])
  nextNodeId Int
  lengthM    Float
  phase      Int
  code       String
  rOhmPerKm  Float
  xOhmPerKm  Float

  @@map(name: "lines")
}

model LoadSample {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "load_samples")
}

model PVSample {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "pv_samples")
}

model EHPSample {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "ehp_samples")
}

model UCHPSample {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "uchp_samples")
}
