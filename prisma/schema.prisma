// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Feeder {
  id         Int    @id @default(autoincrement())
  networkNum Int
  feederNum  Int
  nodes      Node[]
  lines      Line[]

  @@map(name: "feeders")
}

model Node {
  id        Int     @id @default(autoincrement())
  feeder    Feeder  @relation(fields: [feederId], references: [id])
  feederId  Int
  num       Int
  posX      Float
  posY      Float
  hasLoad   Boolean
  nextLines Line[]  @relation("PrevNode")
  prevLines Line[]  @relation("NextNode")

  @@map(name: "nodes")
}

model Line {
  id         Int    @id @default(autoincrement())
  feeder     Feeder @relation(fields: [feederId], references: [id])
  feederId   Int
  prevNode   Node   @relation("PrevNode", fields: [prevNodeId], references: [id])
  prevNodeId Int
  nextNode   Node   @relation("NextNode", fields: [nextNodeId], references: [id])
  nextNodeId Int
  lengthM    Float
  phase      Int
  code       String
  rOhmPerKm  Float
  xOhmPerKm  Float

  @@map(name: "lines")
}

model Load {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "loads")
}

model PV {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "pvs")
}

model EHP {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "ehps")
}

model UCHP {
  id     Int    @id @default(autoincrement())
  num    Int
  hour   Int
  minute Int
  val    Float
  season String

  @@map(name: "uchps")
}
